### 保护代理
保护代理用于控制不同权限的对象对目标对象的访问，JavaScript并不容易实现保护代理，因为我们无法判断谁访问了某个对象。

### 虚拟代理
虚拟代理把一些开销很大的对象，延迟到真正需要它的时候才去创建

### 虚拟代理实现图片预加载

```
var myImage = (function() {
    var imgNode = document.createElement('img');
    document.body.appendChild(imgNode);

    return {
        setSrc: function(src) {
            imgNode.src = src
        }
    }
})();

var proxyImage = (function() {
    var img = new Image;
    img.onload = function() {
        myImage.setSrc(this.src);
    }
    return {
        setSrc: function(src) {
            myImage.setSrc('loding.gif')
            img.src = src;
        }
    }
})();
proxyImage.setSrc('img.jpg');
```

### 代理的意义
 单一指责原则
    就一个类（通常也包括对象和函数等）而言，应该仅有一个引起它变化的原因。

### 虚拟带你合并 HTTP 请求

```
var synchoronousFile = function(id) {
    console.log('开始同步文件， id 为：' + id);
}

var proxySynchoronousFile = (function() {
    var cache = [];   // 保存一段时间内需要同步的ID
    var timer;

    return function(id) {
        cache.push(id);
        if(timer) {
            return 
        }
        timer = setTimeout(function() {
            synchoronousFile(cache.join(','));
            clearTimeout(timer);
            timer = null;
            cache.length = 0;
        }, 2000)
    }
})();

var checkbox = document.getElementsByTagName('input');

for (i = 0, c; c = checkbox[i++];) {
    c.onclick = function() {
        if (this.checked === true) {
            proxySynchoronousFile(this.id)
        }
    }
}
```
